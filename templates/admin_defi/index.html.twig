{% extends 'base.html.twig' %}

{% block title %}Gestion des Défis
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h1>
				<i class="fa-solid fa-trophy"></i>
				Liste de tous les Défis</h1>
			<a href="{{ path('app_admin') }}" class="btn btn-outline-secondary">
				<i class="fa-solid fa-arrow-left"></i>
				Retour Dashboard
			</a>
		</div>

		<div class="card shadow-sm">
			<div class="card-body p-0">
				<div class="table-responsive">
					<table class="table table-striped table-hover mb-0 align-middle">
						<thead class="table-light">
							<tr>
								<th>ID</th>
								<th>Titre</th>
								<th>Statut</th>
								<th>Auteur</th>
								<th class="text-end">Actions</th>
							</tr>
						</thead>
						<tbody>
							{% for defi in defis %}
								<tr>
									<td>{{ defi.id }}</td>
									<td>
										<strong>{{ defi.title }}</strong>
										<div class="small text-muted">{{ defi.description|slice(0, 50) }}...</div>
									</td>
									<td>
										{% if defi.statut == 'realisable' %}
											<span class="badge bg-success">Publié</span>
										{% elseif defi.statut == 'en_attente' %}
											<span class="badge bg-warning text-dark">En attente</span>
										{% else %}
											<span class="badge bg-secondary">{{ defi.statut }}</span>
										{% endif %}
									</td>
									<td>{{ defi.author.name ?? 'Anonyme' }}</td>
									<td class="text-end">
										<a href="{{ path('app_admin_defi_show', {'id': defi.id}) }}" class="btn btn-sm btn-info text-white">
											<i class="fa-solid fa-eye"></i>
										</a>
										<a href="{{ path('app_admin_defi_edit', {'id': defi.id}) }}" class="btn btn-sm btn-warning">
											<i class="fa-solid fa-pen"></i>
										</a>
									</td>
								</tr>
							{% else %}
								<tr>
									<td colspan="5" class="text-center">Aucun défi trouvé</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<div class="mt-3">
			<a href="{{ path('app_admin_defi_new') }}" class="btn btn-success">
				<i class="fa-solid fa-plus"></i>
				Créer un défi
			</a>
		</div>
	</div>
{% endblock %}
